{{ScriptInfo
|name=Data Surface
|tooltip=Add a mesh from data files (usually generated by other programs)
|menu=Group: AddMesh
|usage=in 3D View: Shift-A > Mesh > Data Surface
|version=1.1
|blender=2.71 or later
|author=Sun Sibai, Pontiac
|license=GPL v2 or later
|distribution=Extern
|note=Data files contain matrices of x,y,z coordinates of vertices.
|exe=__init__.py & add_mesh_text_data_surface.py
|download=https://github.com/niasw/add_mesh_DataSurface/archive/master.zip
|bugtracker=https://github.com/niasw/add_mesh_DataSurface/issues
|link=https://github.com/niasw/add_mesh_DataSurface
|issues=
}}

== Introduction ==
In engineering and science, numerical data sometimes are more common than analytical expressions. Analytical expressions are accurate and easy to accept, but for numerical algorithms (such as self-adapting optimizing) and real experiments (such as measurements with instruments), numerical data are more suitable and more convenient.

If you want to transfer data from numerical algorithms or real experiments into Blender to visualize them, this addon may be your proper choice. In the example I will show below, I turned text data of x,y and z coordinates into a mesh surface.

If you are seeking for addons for analytical expressions, please go to the addon [http://wiki.blender.org/index.php/Extensions:2.5/Py/Scripts/Add_Mesh/Add_3d_Function_Surface 3D Function Surface].

== Installation ==
To install this addon, please copy all the scripts and data files to the addon path.

* Download the source file from the [https://github.com/niasw/add_mesh_DataSurface/archive/master.zip download link] and extract to a folder <b>add_mesh_DataSurface</b>, or use git clone [https://github.com/niasw/add_mesh_DataSurface https://github.com/niasw/add_mesh_DataSurface].

Then copy directory <b>add_mesh_DataSurface</b> to Blender addon path. If you don't know where is the addon path, please open your Blender, and run scripts below in the Python Console:

<source lang="python">
import addon_utils
print(addon_utils.paths())
</source>

To enable this addon, please open your Blender.
* Click {{Shortcut|Files}} > {{Shortcut|User Preferences ...}} > {{Shortcut|Addons}} > {{Shortcut|Add Mesh}}.

* Find [[File:niasw_add_mesh_DataSurface07.png‎]] and click the checkbox (right)

== Instructions ==
There are two modules in this addon:

* <b>Text Data Surface</b> can create all mesh surface in 3D space. But it needs 3 matrices data:
<source lang="python">
x=x(u,v)
y=y(u,v)
z=z(u,v)
</source>
where x,y,z are coordinates in space and u,v are column and row indices.

* <b>Z Data Surface</b> can create a subset mesh surface of above. It is convenient for only 1 table data needed:
<source lang="python">
z=f(x,y)
</source>
where x,y data are in form of vector and z data are in form of matrix.


To show how to use this addon, I will give examples.
=== example for Text Data Surface ===
* In the <b>3D View</b> block, press {{Shortcut|Shift+A}} > {{Shortcut|Mesh}} > {{Shortcut|Data Surface}} > {{Shortcut|Text Data Surface}}.
Then a twisted ribbon-like mesh shows.

<div>
[[File:niasw_add_mesh_DataSurface01.png|340px|]][[File:niasw_add_mesh_DataSurface02.png‎|340px|]]
</div>

<div style="overflow: hidden;margin: 0px;">
 <div style="float: left;">
The coordinates of vertices are from data files <b>Xdata.txt</b>, <b>Ydata.txt</b> and <b>Zdata.txt</b>. <br/>These data can be generated from Octave/Matlab script <b>example.m</b>. <br/>To change the data files, clicking the browsing buttons (shown right).
 </div>
 <div style="margin-top: 10px; float: right;">
[[File:niasw_add_mesh_DataSurface0A.png]]
 </div>
</div>

As for the <b>loop</b> and <b>flip</b> checkbox, try them to know what they represent. After clicking <b>loop</b>, you should see the figure closed in each Z slice. Yes, the ribbon becomes a tube. After clicking <b>flip</b>, you should see the light effect changed a little. Yes, the normal direction flipped.

{| style="margin-left: 128px;margin-right: 128px;"
|-
! [[File:niasw_add_mesh_DataSurface03_1.png‎]]
! [[File:niasw_add_mesh_DataSurface04_1.png‎]]
! [[File:niasw_add_mesh_DataSurface05_1.png‎]]
|-
| [[File:niasw_add_mesh_DataSurface03_2.png‎|142px|]]
| [[File:niasw_add_mesh_DataSurface04_2.png‎|142px|]]
| [[File:niasw_add_mesh_DataSurface05_2.png‎|142px|]]
|}

=== example for Z Data Surface ===
* In the <b>3D View</b> block, press {{Shortcut|Shift+A}} > {{Shortcut|Mesh}} > {{Shortcut|Data Surface}} > {{Shortcut|Z(X,Y) Table Surface}}.
Then a floating ribbon-like mesh shows.

<div>
[[File:niasw_add_mesh_DataSurface0B.png|340px|]][[File:niasw_add_mesh_DataSurface0C.png‎|340px|]]
</div>

<div style="overflow: hidden;margin: 0px;">
 <div style="float: left;">
The coordinates of vertices are from table data file <b>csvdata.csv</b>. <br/>To change the data files, clicking the browsing button (shown right).<br/>Plain text table is also OK.
 </div>
 <div style="margin-top: 10px; float: right;">
[[File:niasw_add_mesh_DataSurface12.png]]
 </div>
</div>


The structure of the table in .csv file is shown below:

The .csv file can be exported from spreadsheet programs such as Excel and LibreOffice Calc.
[[File:niasw_add_mesh_DataSurface13.png|680px]]

There are 3 boolean options in Z Data Surface. <b>loop</b> and <b>flip</b> are like those in Text Data Surface.

Here shows their effects.

{| style="margin-left: 128px;margin-right: 128px;"
|-
! [[File:niasw_add_mesh_DataSurface0D_1.png‎]]
! [[File:niasw_add_mesh_DataSurface0E_1.png‎]]
! [[File:niasw_add_mesh_DataSurface0F_1.png‎]]
|-
| [[File:niasw_add_mesh_DataSurface0D_2.png‎|140px|]]
| [[File:niasw_add_mesh_DataSurface0E_2.png‎|140px|]]
| [[File:niasw_add_mesh_DataSurface0F_2.png‎|140px|]]
|}

The <b>tran</b> option is to switch x axis with y axis. It is the same with transposing the whole data table. By combining <b>tran</b> function and <b>loop</b> function, we can close the surface mesh either in x direction or y direction, shown below:

{| style="margin-left: 198px;margin-right: 198px;"
|-
! [[File:niasw_add_mesh_DataSurface10_1.png‎]]
! [[File:niasw_add_mesh_DataSurface11_1.png‎]]
|-
| [[File:niasw_add_mesh_DataSurface10_2.png‎|140px|]]
| [[File:niasw_add_mesh_DataSurface11_2.png‎|140px|]]
|-
| [[File:niasw_add_mesh_DataSurface10_3.png‎|140px|]]
| [[File:niasw_add_mesh_DataSurface11_3.png‎|140px|]]
|}

== Notes ==
If you have further requirements, you can fork the source codes and develop your own one. To know how this addon works, please go to page [http://wiki.blender.org/index.php/Extensions:2.6/Py/Scripts/Add_Mesh/Data_Surface/Text_Data_Surface Text Data Surface] and [http://wiki.blender.org/index.php/Extensions:2.6/Py/Scripts/Add_Mesh/Data_Surface/Z_Data_Surface Z Data Surface].

== Compatibility ==
This addon has been tested on Ubuntu 12.04, Blender '''2.71a''', Python 3.2 (bundled), 32-bit.

It may also work with Blender versions < 2.71, but not tested yet.

== Troubleshooting ==
* '''Add-on does not appear on the list.'''

Check if you have installed this addon. Make sure the ".py" files are in the addon path properly. Make sure you have enabled this addon in <b>User Preferences</b>.


* '''Error combining coordinate data: Traceback (most recent call last):'''
* ''' ... '''
* '''FileNotFoundError: [Errno 2] No such file or directory: '.../add_mesh_Surface/Xdata.txt' '''
or
* '''Fail to find example data files:'''
* '''I have searched in following paths:'''
* '''  .../add_mesh_DataSurface/Xdata.txt'''

These messages mean Blender did not find the data files. When you downloaded it as a zip file, did you extract the folder as <b>add_mesh_DataSurface</b> instead of the default 'add_mesh_DataSurface-master'? If not, please rename this folder under addon path as <b>add_mesh_DataSurface</b>.


* '''Browser Button fails to work ... '''

Reset it: Delete the current object and re-add it please.

== Support ==
To raise a bug report, you may issue it on [https://github.com/niasw/add_mesh_DataSurface/issues here(github-issues)], or [https://developer.blender.org/T41352 here(developer.blender.org-task)].

To contact with me, please write an email to <niasw(AT)pku.edu.cn>.

== Thanks ==

"makeFaces" method and "create_mesh_and_object" method in <b>add_mesh_text_data_surface.py</b> and <b>add_mesh_z_data_surface.py</b> are from Blender addon [http://wiki.blender.org/index.php/Extensions:2.6/Py/Scripts/Add_Mesh/Add_Extra add extra objects]. Thank Pontiac.

Thank Noel Stoutenburg for suggestions about .csv files and Z Data Surface. Thank [https://github.com/squarednob @squarednob] for issue reporting and testing.

== External links ==
[https://github.com/niasw/add_mesh_DataSurface https://github.com/niasw/add_mesh_DataSurface]

----
* Back to [[Extensions:2.6/Py/Scripts/Add_Mesh]]

